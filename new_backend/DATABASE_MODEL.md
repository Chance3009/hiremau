-- SUPABASE STORAGE BUCKET
company
resumes
transcripts
other-docs


-- DATABASE MODEL AT SUPABASE

-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.candidate_ai_analysis (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  candidate_id uuid,
  analysis_json jsonb,
  model_version text,
  created_at timestamp without time zone DEFAULT now(),
  CONSTRAINT candidate_ai_analysis_pkey PRIMARY KEY (id),
  CONSTRAINT candidate_ai_analysis_candidate_id_fkey FOREIGN KEY (candidate_id) REFERENCES public.candidates(id)
);
CREATE TABLE public.candidate_files (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  candidate_id uuid,
  file_type text,
  file_url text,
  extracted_text text,
  uploaded_at timestamp without time zone DEFAULT now(),
  file_name text,
  file_size integer,
  file_category text,
  CONSTRAINT candidate_files_pkey PRIMARY KEY (id),
  CONSTRAINT candidate_files_candidate_id_fkey FOREIGN KEY (candidate_id) REFERENCES public.candidates(id)
);
CREATE TABLE public.candidate_stage_history (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  candidate_id uuid,
  action text,
  from_stage text,
  to_stage text,
  notes text,
  performed_by text,
  timestamp timestamp without time zone DEFAULT now(),
  status text,
  CONSTRAINT candidate_stage_history_pkey PRIMARY KEY (id),
  CONSTRAINT candidate_stage_history_candidate_id_fkey FOREIGN KEY (candidate_id) REFERENCES public.candidates(id)
);
CREATE TABLE public.candidate_table (
  id uuid NOT NULL,
  content text,
  metadata jsonb,
  embedding USER-DEFINED,
  name text,
  document_id uuid,
  CONSTRAINT candidate_table_pkey PRIMARY KEY (id),
  CONSTRAINT candidate_table_document_id_fkey FOREIGN KEY (document_id) REFERENCES public.test(id)
);
CREATE TABLE public.candidates (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  name text NOT NULL,
  email text UNIQUE,
  phone text,
  status text,
  stage text,
  education text,
  experience text,
  ai_profile_json jsonb,
  ai_profile_summary text,
  profile_embedding USER-DEFINED,
  created_at timestamp without time zone DEFAULT now(),
  updated_at timestamp without time zone DEFAULT now(),
  linkedin_url text,
  github_url text,
  portfolio_url text,
  current_position text,
  years_experience integer,
  certifications ARRAY,
  languages ARRAY,
  availability text,
  salary_expectations numeric,
  preferred_work_type text,
  source text,
  notes text,
  skills ARRAY,
  CONSTRAINT candidates_pkey PRIMARY KEY (id)
);
CREATE TABLE public.company_profile (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  name text NOT NULL,
  address text,
  industry text,
  profile_text text,
  created_at timestamp without time zone DEFAULT now(),
  CONSTRAINT company_profile_pkey PRIMARY KEY (id)
);
CREATE TABLE public.company_table (
  id uuid NOT NULL,
  content text,
  metadata jsonb,
  embedding USER-DEFINED,
  CONSTRAINT company_table_pkey PRIMARY KEY (id)
);
CREATE TABLE public.comprehensive_evaluation (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  candidate_id character varying NOT NULL,
  initial_screening_id uuid,
  candidate_name character varying NOT NULL,
  position_applied character varying NOT NULL,
  interview_date timestamp without time zone,
  interviewer_name character varying,
  interview_type character varying,
  interview_duration_minutes integer,
  technical_skills_demonstrated text,
  problem_solving_approach text,
  analytical_thinking text,
  tool_proficiency_assessment text,
  industry_expertise text,
  process_understanding text,
  quality_standards_knowledge text,
  core_competencies text,
  methodology_knowledge text,
  tool_and_software_skills text,
  industry_trends_awareness text,
  compliance_knowledge text,
  process_improvement_experience text,
  project_complexity_assessment text,
  decision_making_examples text,
  challenges_overcome text,
  team_collaboration_examples text,
  mentoring_experience text,
  teamwork_examples text,
  leadership_situations text,
  adaptability_examples text,
  learning_mindset text,
  work_style_preferences text,
  motivation_drivers text,
  career_aspirations text,
  feedback_receptiveness text,
  claimed_vs_actual_experience text,
  depth_of_knowledge text,
  practical_application text,
  preparation_level_assessment text,
  engagement_level text,
  communication_effectiveness text,
  problem_solving_demonstration text,
  salary_expectation_discussion text,
  availability_and_timeline text,
  work_arrangement_preferences text,
  overall_impression text,
  final_recommendation character varying CHECK (final_recommendation::text = ANY (ARRAY['Strong Reject'::character varying, 'Reject'::character varying, 'Maybe'::character varying, 'Recommend'::character varying, 'Strong Recommend'::character varying]::text[])),
  recommendation_justification text,
  key_strengths_summary text,
  main_concerns_summary text,
  onboarding_considerations text,
  comparison_with_other_candidates text,
  unique_value_proposition text,
  risk_assessment text,
  next_steps_required text,
  interview_format character varying,
  interviewer_notes text,
  created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT comprehensive_evaluation_pkey PRIMARY KEY (id),
  CONSTRAINT comprehensive_evaluation_initial_screening_id_fkey FOREIGN KEY (initial_screening_id) REFERENCES public.initial_screening_evaluation(id)
);
CREATE TABLE public.event_interviews (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  event_id uuid,
  candidate_id uuid,
  job_id uuid,
  interviewer text,
  scheduled_at timestamp without time zone,
  status text,
  duration_minutes integer DEFAULT 30,
  notes text,
  CONSTRAINT event_interviews_pkey PRIMARY KEY (id),
  CONSTRAINT event_interviews_candidate_id_fkey FOREIGN KEY (candidate_id) REFERENCES public.candidates(id),
  CONSTRAINT event_interviews_job_id_fkey FOREIGN KEY (job_id) REFERENCES public.jobs(id),
  CONSTRAINT event_interviews_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.events(id)
);
CREATE TABLE public.event_positions (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  event_id uuid,
  job_id uuid,
  positions_available integer DEFAULT 1,
  positions_filled integer DEFAULT 0,
  CONSTRAINT event_positions_pkey PRIMARY KEY (id),
  CONSTRAINT event_positions_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.events(id),
  CONSTRAINT event_positions_job_id_fkey FOREIGN KEY (job_id) REFERENCES public.jobs(id)
);
CREATE TABLE public.event_registrations (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  event_id uuid,
  candidate_id uuid,
  registered_at timestamp without time zone DEFAULT now(),
  CONSTRAINT event_registrations_pkey PRIMARY KEY (id),
  CONSTRAINT event_registrations_candidate_id_fkey FOREIGN KEY (candidate_id) REFERENCES public.candidates(id),
  CONSTRAINT event_registrations_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.events(id)
);
CREATE TABLE public.events (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  title text NOT NULL,
  date date NOT NULL,
  time text,
  location text,
  status text,
  positions integer,
  registrations integer,
  interviews integer,
  analytics_json jsonb,
  created_at timestamp without time zone DEFAULT now(),
  updated_at timestamp without time zone DEFAULT now(),
  name text,
  description text,
  event_type text,
  start_date timestamp with time zone,
  end_date timestamp with time zone,
  max_participants integer,
  current_participants integer DEFAULT 0,
  CONSTRAINT events_pkey PRIMARY KEY (id)
);
CREATE TABLE public.initial_screening_evaluation (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  candidate_id character varying NOT NULL,
  candidate_name character varying NOT NULL,
  position_applied character varying NOT NULL,
  evaluation_date timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
  resume_summary text,
  years_of_experience numeric,
  education_background text,
  career_progression text,
  technical_skills text,
  software_proficiency text,
  industry_knowledge text,
  soft_skills_claimed text,
  certifications text,
  technical_competency_assessment text,
  experience_relevance text,
  communication_assessment text,
  standout_qualities text,
  potential_concerns text,
  strengths text,
  weaknesses text,
  red_flags text,
  growth_potential text,
  cultural_fit_indicators text,
  missing_required_skills text,
  transferable_skills text,
  learning_curve_assessment text,
  recommendation character varying CHECK (recommendation::text = ANY (ARRAY['Reject'::character varying, 'Maybe'::character varying, 'Interview'::character varying, 'Strong Yes'::character varying]::text[])),
  recommendation_reasoning text,
  interview_focus_areas text,
  created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT initial_screening_evaluation_pkey PRIMARY KEY (id)
);
CREATE TABLE public.interviews (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  candidate_id uuid,
  job_id uuid,
  event_id uuid,
  interviewer text,
  date date,
  time text,
  duration integer,
  type text,
  status text,
  room text,
  notes text,
  transcript_file_id uuid,
  created_at timestamp without time zone DEFAULT now(),
  interview_type text,
  scheduled_date timestamp with time zone,
  duration_minutes integer,
  ai_analysis jsonb,
  CONSTRAINT interviews_pkey PRIMARY KEY (id),
  CONSTRAINT interviews_transcript_file_id_fkey FOREIGN KEY (transcript_file_id) REFERENCES public.candidate_files(id),
  CONSTRAINT interviews_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.events(id),
  CONSTRAINT interviews_job_id_fkey FOREIGN KEY (job_id) REFERENCES public.jobs(id),
  CONSTRAINT interviews_candidate_id_fkey FOREIGN KEY (candidate_id) REFERENCES public.candidates(id)
);
CREATE TABLE public.jobs (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  title text NOT NULL,
  department text,
  location text,
  type text,
  experience text,
  salary text,
  status text,
  applicants integer,
  shortlisted integer,
  interviewed integer,
  description text,
  created_at timestamp without time zone DEFAULT now(),
  updated_at timestamp without time zone DEFAULT now(),
  company text DEFAULT 'Your Company'::text,
  job_type text,
  salary_range text,
  responsibilities ARRAY,
  benefits ARRAY,
  requirements ARRAY,
  CONSTRAINT jobs_pkey PRIMARY KEY (id)
);
CREATE TABLE public.test (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  name text,
  url text,
  CONSTRAINT test_pkey PRIMARY KEY (id)
);